{% extends 'base.htm' %}

{% block title %}
{{ p.title }}
{% endblock %}

{% block content %}
<h2>{{ p.title }}</h2>

<p class="markdown">{{ p.text }}</p>

<div>
  {% if user.is_authenticated %}
  {% if s_form %}
  <form enctype="multipart/form-data" method="post">
    <legend>Submit Your Code Here</legend>
    {% csrf_token %}
    {{ s_form.as_p }}
    <button type="submit">Submit</button>
  </form>

  {% elif repeat_submission %}
  <p><em>You have already submitted a solution to this problem once. If it is
    not on the leaderboard, one of our moderators may not have verified it to
    be working yet.</em></p> 

  {% elif p.is_past %}
  <p><em>The competition for this problem is already over. Go to the 
    <a href="{% url 'contests:home' %}">main page</a> for fresh
    contests.</em></p>

  {% elif p.is_upcoming %}
  <p><em>You should not be seeing this.</em><p>

  {% endif %}

  {% else %}
  <p><a href="{% url 'users:login' %}">Log In</a> to submit a solution.</p>

  {% endif %}
</div>

<p><a href="{% url 'contests:prob_leader' p.id %}">Click here</a> for this
problem's leaderboard</p>

{% endblock %}
